<html>
<head>
    <style>
    input{
        margin-top: 5px;
    }
    body{
        background-color: rgb(255, 255, 255);
    }
    .flex{
        display: flex;
  background-color: rgb(66, 66, 66);
  justify-content: space-between;
  align-items: center;
  width:100vw;

    }
    iframe{
        width:60vw;
       
    }
    .notes{
        background-color: rgb(255, 255, 255);
        height:400px;
        width:500px;
        margin-right: 50px;
        
    }
    ul{
        list-style-type:none ;
    }
    li{
        max-width:400px;
        word-wrap    : break-word;
        overflow-wrap: break-word;
        


    }
    
    </style>
</head>  

<body >
    <h1>Descrete maths</h1>
    <div id="messages"></div>
    <input id = "head" type="text" placeholder="please enter heading here" style="width:20vw;height:5vw">
    <input id = "code" type="text" placeholder="please enter code here" style="width:50vw;height:5vw">
    
    <button onclick="myfunc()" style="height:5vw; width:7vw;"id = "submit">Submit</button>

    

</body>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-database.js"></script>
    
    
    <script>
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      var firebaseConfig = {
        apiKey: "AIzaSyDQNhV83oQIl3ZKWd3xzLv5jpXSwpsHhsg",
        authDomain: "msm-branch-2e599.firebaseapp.com",
        databaseURL: "https://msm-branch-2e599-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "msm-branch-2e599",
        storageBucket: "msm-branch-2e599.appspot.com",
        messagingSenderId: "412647041254",
        appId: "1:412647041254:web:6dacbb35722219efd7b327",
        measurementId: "G-Y7G0MJXP68"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    
      function myfunc()
                {
                    videocode = document.getElementById("code").value
                    head = document.getElementById("head").value+" ~ discrete math"
                    console.log(document.getElementById("code").value);
                    firebase.database().ref("messages203").push().set({
                        "sender" : videocode,
                        "heading": head

                        
                    });
                    
                }
        function add(e)
        {
            console.log(e);
            var notes = localStorage.getItem(e);
            if(notes){
            notes = notes.replaceAll('"', "");
            notes = notes.replaceAll('{', "");
            notes = notes.replaceAll('}', "");
            }
            console.log(notes)
            notes = notes+"&#8226;"+document.getElementById(e+"input").value+"<br>";
            console.log(notes)

            localStorage.setItem(e, JSON.stringify(notes));
        load(e)
        }
        function load(e){
        if(localStorage.getItem(e)){
        var notes = document.getElementById(e+"input").value; 
        if(notes){
        notes = notes.replaceAll('"', "");}
        var j = "";
        j+= "<li>"+"&#8226;"+notes+"</li>";
        document.getElementById(e+"ul").innerHTML += j ;
        document.getElementById(e+"input").value = "";
        }
    }
        
    firebase.database().ref("messages203").on("child_added",function(snapshot){
    var i = " " ;
    var j = " ";
    function add()
    {
        var notes = localStorage.getItem(snapshot.val().heading);
        notes += document.getElementById(snapshot.val().sender+"input").value;
        localStorage.setItem(snapshot.val().heading, JSON.stringify(notes));
        load();
    }
    function load(){
        if(localStorage.getItem(snapshot.val().heading)){
        var notes = localStorage.getItem(snapshot.val().heading);
        if(notes){
        notes = notes.replaceAll('"', "");
        }
        var x = 0;

        
        j+= "<li>"+notes+"</li>";
        
        }
    }
    load()
    
    i+="<h1>"+snapshot.val().heading+"</h1>" +"<br>";
    i+="<div class = 'flex' >"+snapshot.val().sender+"<div class = 'notes' id = "+snapshot.val().heading+" ><div style='overflow-y: scroll;height:400px;'><ul id = \""+snapshot.val().heading+"ul"+"\"list"+">"+j+"</ul><br></div><div class = 'write'><input style='width:30vw;' id = \""+snapshot.val().heading+"input\""+"type='text'><button onclick = 'add(\""+snapshot.val().heading+"\")' value="+snapshot.val().heading+">add</button></div></div></div>"+"<br><br>";
    document.getElementById("messages").innerHTML += i ;

    });
                
    </script>
</html>